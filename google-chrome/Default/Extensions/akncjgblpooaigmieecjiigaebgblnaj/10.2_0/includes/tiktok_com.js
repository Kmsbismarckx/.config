!function(t){function e(e){for(var n,i,s=e[0],l=e[1],c=e[2],u=0,f=[];u<s.length;u++)i=s[u],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&f.push(a[i][0]),a[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);for(d&&d(e);f.length;)f.shift()();return r.push.apply(r,c||[]),o()}function o(){for(var t,e=0;e<r.length;e++){for(var o=r[e],n=!0,s=1;s<o.length;s++){var l=o[s];0!==a[l]&&(n=!1)}n&&(r.splice(e--,1),t=i(i.s=o[0]))}return t}var n={},a={14:0},r=[];function i(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=n,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var s=window.savefromContentScriptWebpackJsonp=window.savefromContentScriptWebpackJsonp||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var d=l;r.push([124,0]),o()}({111:function(t,e,o){"use strict";o.r(e);var n=o(34),a=o.n(n)()(!1);a.push([t.i,".jBOFD--container{position:absolute;z-index:10}.BJ-ZZ--sf__tooltip{display:block;outline:none;-webkit-user-select:none;user-select:none;cursor:default;position:absolute;z-index:10000;transition:opacity .25s;top:35px;left:2px;white-space:nowrap}.kXEuk--sf__tooltip__container{outline:none;font-family:Arial;font-size:14px;font-weight:700;background-color:#4d4d4d;border-radius:8px;color:#fff;padding:8px;margin-bottom:0;display:flex}.uvaWg--sf__tooltip__text{padding-top:6px}.gB5-Q--sf__tooltip__text__alt{margin-top:5px;display:inline-block}.GFrc0--sf__tooltip__button{margin:4px 4px 0;width:20px;height:18px;background-color:#000;border-radius:5px;border:solid #000;border-width:1px 1px 3px}.hdWNF--sf__tooltip__triangle{position:relative;left:8px;width:0;height:0;border-color:transparent transparent #4d4d4d;border-style:solid;border-width:0 8px 8px}.KE\\+w5--sf__tooltip__button_whiteground{fontWeight:bold;font-size:8px;text-align:center;z-index:1;position:relative;width:20px;height:18px;background-color:#fff;color:#000;border-radius:5px}.wCmWm--sf__tooltip__button_safari,.mwA8z--sf__tooltip__button_whiteground_safari{width:27px}.jBOFD--container.\\+Ncst--largeContainer{top:20px;left:145px}.jBOFD--container._0AmPQ--middleContainer{top:20px;left:20px}.jBOFD--container.xsLiH--feedItemContainer{top:10px;left:10px}.YBzmP--button{display:flex;align-items:center;justify-content:center;width:30px;height:30px;background-color:rgba(0,0,0,.5);border-radius:50%;z-index:9;border:1px solid hsla(0,0%,50.2%,.5)}.YBzmP--button a{padding:10px}",""]),a.locals={container:"jBOFD--container",sf__tooltip:"BJ-ZZ--sf__tooltip",sfTooltip:"BJ-ZZ--sf__tooltip",sf__tooltip__container:"kXEuk--sf__tooltip__container",sfTooltipContainer:"kXEuk--sf__tooltip__container",sf__tooltip__text:"uvaWg--sf__tooltip__text",sfTooltipText:"uvaWg--sf__tooltip__text",sf__tooltip__text__alt:"gB5-Q--sf__tooltip__text__alt",sfTooltipTextAlt:"gB5-Q--sf__tooltip__text__alt",sf__tooltip__button:"GFrc0--sf__tooltip__button",sfTooltipButton:"GFrc0--sf__tooltip__button",sf__tooltip__triangle:"hdWNF--sf__tooltip__triangle",sfTooltipTriangle:"hdWNF--sf__tooltip__triangle",sf__tooltip__button_whiteground:"KE+w5--sf__tooltip__button_whiteground",sfTooltipButtonWhiteground:"KE+w5--sf__tooltip__button_whiteground",sf__tooltip__button_safari:"wCmWm--sf__tooltip__button_safari",sfTooltipButtonSafari:"wCmWm--sf__tooltip__button_safari",sf__tooltip__button_whiteground_safari:"mwA8z--sf__tooltip__button_whiteground_safari",sfTooltipButtonWhitegroundSafari:"mwA8z--sf__tooltip__button_whiteground_safari",largeContainer:"+Ncst--largeContainer",middleContainer:"_0AmPQ--middleContainer",feedItemContainer:"xsLiH--feedItemContainer",button:"YBzmP--button"},e.default=a},124:function(t,e,o){"use strict";o.r(e);var n=o(10),a=o(4),r=o(2),i=o.n(r),s=o(0),l=o(12),c=o(28),d=o(18),u=o(16),f=o(33),_=o(25),p=o(27),b=o(9),m=o(1),v=o(88),g=o.n(v),h=o(36),x=o(32),y=o.n(x),w=o(15),k=o(19),j=m.c.memo((function(t){var e=t.url,o=t.filename,a=t.containerType,r=void 0===a?"middle":a,i=t.children,l=Object(h.a)(g.a),c=m.c.useState(!1),d=Object(n.a)(c,2),u=d[0],f=d[1],_=m.c.useState(!1),p=Object(n.a)(_,2),b=p[0],v=p[1],x=navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome"),j=m.c.useCallback((function(t){if(t.stopPropagation(),s.a.isFirefox){t.preventDefault();var n=e;return Object(k.a)({action:"ffTiktokDownloadMedia",downloadFileUrl:n,filename:o})}t.altKey||s.a.isFirefox?Object(w.a)({category:"download",subcategory:"ti",event:"video"}):(b||(v(!0),setTimeout((function(){v(!1)}),2e3)),t.preventDefault())}),[b]),O=m.c.useCallback((function(t){t.altKey||t.ctrlKey||s.a.isFirefox||f(!u)}),[u]),S=m.c.useMemo((function(){return"large"===r?l.largeContainer:"middle"===r?l.middleContainer:"feedItem"===r?l.feedItemContainer:""}),[r]);return m.c.createElement("div",{className:y()(l.container,S)},m.c.createElement("div",{className:l.button},s.a.isFirefox?m.c.createElement("a",{onclick:j},i):m.c.createElement("a",{href:e,download:o,target:"_blank",onclick:j,onmouseenter:O,onmouseleave:O},i),u&&m.c.createElement("div",{className:y()(l.sf__tooltip)},m.c.createElement("div",{className:y()(l.sf__tooltip__triangle)}),m.c.createElement("div",{className:y()(l.sf__tooltip__container)},m.c.createElement("span",{className:y()(l.sf__tooltip__text)},s.a.i18n.getMessage("download_button_hold")),m.c.createElement("div",{className:y()(l.sf__tooltip__button,x?l.sf__tooltip__button_safari:"")},m.c.createElement("div",{className:y()(l.sf__tooltip__button_whiteground,x?l.sf__tooltip__button_whiteground_safari:"")},m.c.createElement("span",{className:y()(l.sf__tooltip__text__alt)},x?"option":"alt"))),m.c.createElement("span",{className:y()(l.sf__tooltip__text)},s.a.i18n.getMessage("download_button_and_click"))))))})),O=o(3),S=o(21),E=o(17),B=Object(l.a)("tiktok_com");c.a.isSingle()&&Object(_.b)("tiktok",(function(t,e){var o=Object(u.a)(e),r=e.preferences,l=r.moduleTiktok,c=location.pathname.includes("/embed");s.a.onMessage.addListener((function(e,o,n){if("getModuleInfo"===e.action){if(e.url!==location.href)return;return n({state:l,moduleName:t})}if("changeState"===e.action){if(t!==e.moduleName)return;return _.changeState(e.state)}"updatePreferences"!==e.action||Object.assign(r,e.preferences)})),l&&setTimeout((function(){_.run()}));var _={style:void 0,run:function(){l=1,c?d.a.isAvailable()&&m.mutationMode.start():d.a.isAvailable()&&(this.mutationMode.start(),this.injectStyle())},mutationMode:{observer:null,start:function(){if(this.observer)return this.observer.start();this.observer=new d.a({queries:[{css:['.feed-item-content video, [class*="-DivBasicPlayerWrapper"] video','div[data-e2e="browse-video"] video[src]',".video-box video[src]",".video-card video[src]",'.feed-item-content video, [class*="-DivBasicPlayerWrapper"] video','div[data-e2e="browse-video"] video'],is:"added",callback:function(t){for(var e,o=0;e=t.added[o];o++)e.dataset.sfSkip>0||_.runDesktop(e)}},{css:['div[data-e2e="feed-video"] video[src]'],is:"added",callback:function(t){t.added.forEach((function(t){t.dataset.sfSkip||_.addButtonForFeedItem(t)}))}}]})},stop:function(){this.observer&&this.observer.stop(),document.querySelectorAll(".sf-dl-container, .sf-feed-dl-container").forEach((function(t){t.remove()})),_.style&&_.style.remove(),["sfSkip","sfReady"].forEach((function(t){for(var e,o=Object(f.a)(t),n=document.querySelectorAll("["+o+"]"),a=0;e=n[a];a++)e.removeAttribute(o)}))}},addButtonForFeedItem:function(t){return Object(a.a)(i.a.mark((function e(){var o,a,r,s,l,c,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.closest(".item-video-container")){e.next=3;break}return e.abrupt("return");case 3:return(a=document.createElement("div")).classList.add("sf-feed-dl-container"),e.next=7,E.a.createLinkExtractor("tt-video").extractLinks({element:t});case 7:r=e.sent,s=Object(n.a)(r,1),l=s[0],c=l.url,d=l.filename,_.createDownloadButton(a,d,c,"feedItem"),t.dataset.sfSkip="1",o.appendChild(a);case 15:case"end":return e.stop()}}),e)})))()},runDesktop:function(t){return Object(a.a)(i.a.mark((function e(){var o,a,r,s,l,c,d,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",B.error("videoElement don't found"));case 2:if(o=t.parentElement,a="middle",(t.closest('div[data-e2e="feed-video"]')||t.closest('div[data-e2e="user-post-item-list"]'))&&(a="feedItem"),t.closest('div[data-e2e="browse-video"]')&&(a="large"),!o||o.dataset.sfReady){e.next=19;break}return o.dataset.sfReady=String(1),(r=document.createElement("div")).classList.add("sf-dl-container"),o.appendChild(r),e.next=13,E.a.createLinkExtractor("tt-video").extractLinks({element:t});case 13:s=e.sent,l=Object(n.a)(s,1),c=l[0],d=c.url,u=c.filename,_.createDownloadButton(r,u,d,a);case 19:case"end":return e.stop()}}),e)})))()},createDownloadButton:function(t,e,n,a){return Object(w.a)({category:"append",subcategory:"ti",event:"b"}),Object(w.a)({category:"type",subcategory:"ti",event:n.startsWith("blob")?"blob":"video"}),Object(p.a)(Object(b.e)(j,{url:n,filename:e,containerType:a},[Object(b.e)("img",{src:o.svg.getSrc("download","#fff")})]),t)},injectStyle:function(){this.style=O.a.create("style",{text:Object(S.a)({".sf-dl-container":{display:"none"},"[class*=-DivVideoContainer]:hover .sf-dl-container":{display:"block"},'[data-sf-ready="1"]:hover .sf-dl-container':{display:"block"}})}),document.body.appendChild(this.style)},changeState:function(t){l=t,this.mutationMode.stop(),t&&this.run()}},m={mutationMode:{observer:null,start:function(){if(this.observer)return this.observer.start();this.observer=new d.a({queries:[{css:"._embed_player_video-wrapper",is:"added",callback:function(t){for(var e,o=0;e=t.added[o];o++)e.dataset.sfSkip>0||(e.dataset.sfSkip="1",m.insertDownloadButton(e))}}]})}},insertDownloadButton:function(t){var e;t.dataset.sfReady||(t.dataset.sfReady=String(1),t.addEventListener("mouseenter",Object(a.a)(i.a.mark((function o(){var a,r,s,l,c,d;return i.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(a=document.querySelector("video")){o.next=3;break}return o.abrupt("return");case 3:return o.next=5,E.a.createLinkExtractor("tt-video").extractLinks({element:a});case 5:r=o.sent,s=Object(n.a)(r,1),l=s[0],c=l.url,d=l.filename,e=_.createDownloadButton(t,d,c,"large");case 11:case"end":return o.stop()}}),o)})))),t.addEventListener("mouseleave",(function(){e&&e()})))}}}))},88:function(t,e,o){var n=o(47),a=o(111);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[t.i,a,""]]);var r,i=0,s={injectType:"lazyStyleTag",insert:"head",singleton:!1},l={};l.locals=a.locals||{},l.use=function(){return i++||(r=n(a,s)),l},l.unuse=function(){i>0&&!--i&&(r(),r=null)},t.exports=l}});